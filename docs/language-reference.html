<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Language Reference - MathViz Documentation</title>
  <meta name="description" content="Complete syntax reference for the MathViz programming language.">
  <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><rect fill='%237aa2f7' rx='15' width='100' height='100'/><text x='50' y='70' text-anchor='middle' fill='white' font-size='60' font-family='sans-serif' font-weight='bold'>M</text></svg>">
  <link rel="stylesheet" href="../assets/styles.css">
</head>
<body>
  <header class="nav-header">
    <div class="nav-inner">
      <a href="../index.html" class="nav-brand">
        <div class="nav-brand-icon">M</div>
        MathViz
      </a>
      <nav class="nav-links">
        <a href="getting-started.html" class="nav-link">Docs</a>
        <a href="language-reference.html" class="nav-link active">Language</a>
        <a href="scenes.html" class="nav-link">Manim</a>
        <a href="cli.html" class="nav-link">CLI</a>
        <a href="../examples/index.html" class="nav-link">Examples</a>
      </nav>
      <div class="nav-actions">
        <div class="nav-search" data-search-trigger>
          <svg class="nav-search-icon" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="11" cy="11" r="8"></circle>
            <path d="m21 21-4.3-4.3"></path>
          </svg>
          <input type="text" class="nav-search-input" placeholder="Search docs..." readonly data-search-trigger>
          <kbd class="nav-search-kbd">Ctrl K</kbd>
        </div>
        <a href="https://github.com/CyberSnakeH/MathViz" class="btn btn-secondary btn-sm" target="_blank" rel="noopener">GitHub</a>
      </div>
      <button class="nav-mobile-toggle" aria-label="Toggle menu" onclick="document.getElementById('nav-mobile-menu').classList.toggle('open');">
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <line x1="3" y1="12" x2="21" y2="12"></line>
          <line x1="3" y1="6" x2="21" y2="6"></line>
          <line x1="3" y1="18" x2="21" y2="18"></line>
        </svg>
      </button>
    </div>
    <div class="nav-mobile-menu" id="nav-mobile-menu">
      <a href="getting-started.html" class="nav-link">Docs</a>
      <a href="language-reference.html" class="nav-link">Language</a>
      <a href="scenes.html" class="nav-link">Manim</a>
      <a href="cli.html" class="nav-link">CLI</a>
      <a href="../examples/index.html" class="nav-link">Examples</a>
      <a href="../examples/gallery.html" class="nav-link">Tutorials</a>
      <a href="../examples/advanced.html" class="nav-link">Advanced Modules</a>
      <a href="https://github.com/CyberSnakeH/MathViz" class="nav-link" target="_blank" rel="noopener">GitHub</a>
    </div>
  </header>

  <div class="docs-layout">
    <aside class="docs-sidebar">
      <div class="sidebar-section">
        <div class="sidebar-title">Language</div>
        <nav class="sidebar-nav">
          <a href="#variables" class="sidebar-link">Variables</a>
          <a href="#types" class="sidebar-link">Types</a>
          <a href="#operators" class="sidebar-link">Operators</a>
          <a href="#control-flow" class="sidebar-link">Control Flow</a>
          <a href="#functions" class="sidebar-link">Functions</a>
          <a href="#oop" class="sidebar-link">Classes & OOP</a>
          <a href="#error-handling" class="sidebar-link">Error Handling</a>
          <a href="#pattern-matching" class="sidebar-link">Pattern Matching</a>
        </nav>
      </div>
      <div class="sidebar-section">
        <div class="sidebar-title">Documentation</div>
        <nav class="sidebar-nav">
          <a href="getting-started.html" class="sidebar-link">Getting Started</a>
          <a href="scenes.html" class="sidebar-link">Scenes & Manim</a>
          <a href="modules.html" class="sidebar-link">Module System</a>
          <a href="cli.html" class="sidebar-link">CLI Reference</a>
        </nav>
      </div>
    </aside>

    <main class="docs-content">
      <h1>Language Reference</h1>

      <p>
        MathViz is a statically-typed language with type inference, designed for mathematical
        computation and animation. This reference covers all language constructs.
      </p>

      <h2 id="variables">Variables</h2>

      <h3>let - Mutable Variables</h3>
      <p>Use <code>let</code> to declare mutable variables:</p>

      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">let x = 42              // Type inferred as Int
let y: Float = 3.14     // Explicit type annotation
let name = "MathViz"    // String

x = 100                 // Variables can be reassigned</code></pre>
        </div>
      </div>

      <h3>const - Compile-Time Constants</h3>
      <p>Use <code>const</code> for compile-time constants:</p>

      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">const PI = 3.14159265358979
const MAX_SIZE = 1024
const TAU = 2.0 * PI
const VERSION = "1.0.0"</code></pre>
        </div>
      </div>

      <h2 id="types">Types</h2>

      <h3>Primitive Types</h3>
      <table>
        <thead>
          <tr>
            <th>Type</th>
            <th>Description</th>
            <th>Example</th>
          </tr>
        </thead>
        <tbody>
          <tr><td><code>Int</code></td><td>Integer numbers</td><td><code>42</code>, <code>-17</code></td></tr>
          <tr><td><code>Float</code></td><td>Floating-point numbers</td><td><code>3.14</code>, <code>-0.5</code></td></tr>
          <tr><td><code>Bool</code></td><td>Boolean values</td><td><code>true</code>, <code>false</code></td></tr>
          <tr><td><code>String</code></td><td>Text strings</td><td><code>"hello"</code></td></tr>
          <tr><td><code>None</code></td><td>Absence of value</td><td><code>None</code></td></tr>
        </tbody>
      </table>

      <h3>Collection Types</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">// List - ordered, mutable collection
let numbers: List[Int] = [1, 2, 3, 4, 5]
let names = ["Alice", "Bob", "Charlie"]

// Set - unordered, unique elements
let unique: Set[Int] = {1, 2, 3}
let empty_set: Set[String] = {}

// Dict - key-value mapping
let scores: Dict[String, Int] = {"Alice": 100, "Bob": 85}

// Tuple - fixed-size, mixed types
let point: Tuple[Float, Float] = (3.0, 4.0)
let record = ("John", 25, true)</code></pre>
        </div>
      </div>

      <h3>Optional and Result Types</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">// Optional - may or may not have a value
let maybe_value: Optional[Int] = Some(42)
let nothing: Optional[Int] = None

// Result - success or error
let success: Result[Int, String] = Ok(42)
let failure: Result[Int, String] = Err("Something went wrong")

// Unwrap with ? operator
fn get_value() -> Result[Int, String] {
    let x = try_parse("42")?  // Propagates error if Err
    return Ok(x * 2)
}</code></pre>
        </div>
      </div>

      <h2 id="operators">Operators</h2>

      <h3>Arithmetic Operators</h3>
      <table>
        <thead>
          <tr><th>Operator</th><th>Description</th><th>Example</th></tr>
        </thead>
        <tbody>
          <tr><td><code>+</code></td><td>Addition</td><td><code>5 + 3</code></td></tr>
          <tr><td><code>-</code></td><td>Subtraction</td><td><code>5 - 3</code></td></tr>
          <tr><td><code>*</code></td><td>Multiplication</td><td><code>5 * 3</code></td></tr>
          <tr><td><code>/</code></td><td>Division</td><td><code>5 / 3</code></td></tr>
          <tr><td><code>//</code></td><td>Floor division</td><td><code>5 // 3</code></td></tr>
          <tr><td><code>%</code></td><td>Modulo</td><td><code>5 % 3</code></td></tr>
          <tr><td><code>^</code> or <code>**</code></td><td>Exponentiation</td><td><code>2 ^ 10</code></td></tr>
        </tbody>
      </table>

      <h3>Comparison Operators</h3>
      <table>
        <thead>
          <tr><th>Operator</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>==</code></td><td>Equal to</td></tr>
          <tr><td><code>!=</code></td><td>Not equal to</td></tr>
          <tr><td><code>&lt;</code>, <code>&lt;=</code></td><td>Less than (or equal)</td></tr>
          <tr><td><code>&gt;</code>, <code>&gt;=</code></td><td>Greater than (or equal)</td></tr>
        </tbody>
      </table>

      <h3>Logical Operators</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">let a = true and false   // false
let b = true or false    // true
let c = not true         // false</code></pre>
        </div>
      </div>

      <h3>Set Operators (Unicode)</h3>
      <p>MathViz supports mathematical set notation:</p>
      <table>
        <thead>
          <tr><th>Operator</th><th>Unicode</th><th>Description</th></tr>
        </thead>
        <tbody>
          <tr><td><code>in</code></td><td><code>&#8712;</code></td><td>Element of</td></tr>
          <tr><td><code>notin</code></td><td><code>&#8713;</code></td><td>Not element of</td></tr>
          <tr><td><code>cup</code></td><td><code>&#8746;</code></td><td>Union</td></tr>
          <tr><td><code>cap</code></td><td><code>&#8745;</code></td><td>Intersection</td></tr>
          <tr><td><code>subseteq</code></td><td><code>&#8838;</code></td><td>Subset or equal</td></tr>
          <tr><td><code>supseteq</code></td><td><code>&#8839;</code></td><td>Superset or equal</td></tr>
          <tr><td><code>setminus</code></td><td><code>&#8726;</code></td><td>Set difference</td></tr>
        </tbody>
      </table>

      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">let A = {1, 2, 3}
let B = {3, 4, 5}

let union = A cup B        // {1, 2, 3, 4, 5}
let intersection = A cap B // {3}
let diff = A setminus B    // {1, 2}

if 2 in A {
    println("2 is in A")
}</code></pre>
        </div>
      </div>

      <h2 id="control-flow">Control Flow</h2>

      <h3>if/elif/else</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">let x = 10

if x > 0 {
    println("positive")
} elif x < 0 {
    println("negative")
} else {
    println("zero")
}</code></pre>
        </div>
      </div>

      <h3>for Loops</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">// Range iteration
for i in 0..10 {
    println(i)
}

// Inclusive range
for i in 0..=10 {
    println(i)  // includes 10
}

// Collection iteration
let items = [1, 2, 3, 4, 5]
for item in items {
    println(item)
}</code></pre>
        </div>
      </div>

      <h3>while Loops</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">let count = 0
while count < 10 {
    println(count)
    count += 1
}</code></pre>
        </div>
      </div>

      <h3>break and continue</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">for i in 0..100 {
    if i == 5 {
        continue  // Skip to next iteration
    }
    if i == 10 {
        break     // Exit loop
    }
    println(i)
}</code></pre>
        </div>
      </div>

      <h2 id="functions">Functions</h2>

      <h3>Basic Functions</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">fn add(a: Int, b: Int) -> Int {
    return a + b
}

fn greet(name: String) {
    println("Hello, {}!", name)
}

// With default parameters
fn power(base: Float, exp: Float = 2.0) -> Float {
    return base ^ exp
}</code></pre>
        </div>
      </div>

      <h3>Generic Functions</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">fn identity<T>(x: T) -> T {
    return x
}

fn first<T>(items: List[T]) -> Optional[T] {
    if len(items) > 0 {
        return Some(items[0])
    }
    return None
}</code></pre>
        </div>
      </div>

      <h3>Lambda Expressions</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">// Arrow syntax
let double = (x) => x * 2

// Pipe syntax (Rust-like)
let triple = |x| x * 3

// Multi-parameter
let add = (a, b) => a + b

// Using with higher-order functions
let numbers = [1, 2, 3, 4, 5]
let doubled = numbers.map(|x| x * 2)</code></pre>
        </div>
      </div>

      <h3>JIT Optimization</h3>
      <p>Use decorators to enable Numba JIT compilation:</p>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">@jit
fn compute(arr: List[Float]) -> Float {
    let total = 0.0
    for x in arr {
        total += x * x
    }
    return total
}

@njit(parallel=true)
fn parallel_sum(arr: List[Float]) -> Float {
    let total = 0.0
    for i in 0..len(arr) {
        total += arr[i]
    }
    return total
}</code></pre>
        </div>
      </div>

      <h2 id="oop">Classes & OOP</h2>

      <h3>Structs</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">struct Point {
    x: Float
    y: Float
}

impl Point {
    fn new(x: Float, y: Float) -> Point {
        return Point { x: x, y: y }
    }

    fn distance(self, other: Point) -> Float {
        let dx = self.x - other.x
        let dy = self.y - other.y
        return sqrt(dx*dx + dy*dy)
    }
}

// Usage
let p1 = Point.new(0.0, 0.0)
let p2 = Point.new(3.0, 4.0)
let d = p1.distance(p2)  // 5.0</code></pre>
        </div>
      </div>

      <h3>Traits</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">trait Shape {
    fn area(self) -> Float
    fn perimeter(self) -> Float
}

struct Circle {
    radius: Float
}

impl Shape for Circle {
    fn area(self) -> Float {
        return PI * self.radius ^ 2
    }

    fn perimeter(self) -> Float {
        return 2.0 * PI * self.radius
    }
}</code></pre>
        </div>
      </div>

      <h3>Enums</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">enum Color {
    Red
    Green
    Blue
    RGB(Int, Int, Int)
}

enum Shape {
    Circle(Float)           // radius
    Rectangle(Float, Float) // width, height
    Point
}

let c = Color::RGB(255, 128, 0)
let s = Shape::Circle(5.0)</code></pre>
        </div>
      </div>

      <h2 id="error-handling">Error Handling</h2>

      <h3>Result Type</h3>
      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">fn divide(a: Float, b: Float) -> Result[Float, String] {
    if b == 0.0 {
        return Err("Division by zero")
    }
    return Ok(a / b)
}

// Using match
let result = divide(10.0, 2.0)
match result {
    Ok(value) -> println("Result: {}", value)
    Err(msg) -> println("Error: {}", msg)
}

// Using ? operator
fn compute() -> Result[Float, String] {
    let x = divide(10.0, 2.0)?
    let y = divide(x, 0.0)?  // Will propagate error
    return Ok(y)
}</code></pre>
        </div>
      </div>

      <h2 id="pattern-matching">Pattern Matching</h2>

      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">fn describe_number(n: Int) -> String {
    match n {
        0 -> "zero"
        1 -> "one"
        n where n < 0 -> "negative"
        n where n > 100 -> "large"
        _ -> "other"
    }
}

fn calculate_area(shape: Shape) -> Float {
    match shape {
        Shape::Circle(r) -> PI * r ^ 2
        Shape::Rectangle(w, h) -> w * h
        Shape::Point -> 0.0
    }
}

// Tuple destructuring
let point = (3.0, 4.0)
match point {
    (0.0, 0.0) -> println("origin")
    (x, 0.0) -> println("on x-axis at {}", x)
    (0.0, y) -> println("on y-axis at {}", y)
    (x, y) -> println("point at ({}, {})", x, y)
}</code></pre>
        </div>
      </div>

      <h2>Comprehensions</h2>

      <div class="code-block">
        <div class="code-block-header">
          <span class="code-block-lang">MathViz</span>
        </div>
        <div class="code-block-body">
          <pre><code class="language-mviz">// List comprehension
let squares = [x^2 for x in 0..10]
let evens = [x for x in 0..100 if x % 2 == 0]

// Set comprehension
let unique_squares = {x^2 for x in -5..6}

// Dict comprehension
let square_map = {x: x^2 for x in 0..10}</code></pre>
        </div>
      </div>
    </main>
  </div>

  <footer class="footer">
    <div class="footer-bottom">
      <p class="footer-copyright">MathViz - Open Source under MIT License</p>
      <a href="https://github.com/CyberSnakeH/MathViz" class="footer-social-link" target="_blank" rel="noopener">GitHub</a>
    </div>
  </footer>

  <div id="search-modal" class="search-modal">
    <div class="search-modal-content">
      <input type="text" class="search-modal-input" placeholder="Search documentation...">
      <div class="search-results"></div>
    </div>
  </div>

  <script src="../assets/app.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-python.min.js"></script>
  <script src="../assets/prism-mviz.js"></script>
</body>
</html>
